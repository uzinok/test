"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var l=t[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}var BoltSlider=function(){function e(t){_classCallCheck(this,e);var i=this;return t?document.querySelector(t.slider)?(t.sliderPrew&&!document.querySelector(t.sliderPrew)&&(console.warn("didn't get html element: sliderPrew"),t.sliderPrew=!1),t.playButton&&!document.querySelector(t.playButton)&&(console.warn("didn't get html element: sliderPrew"),t.playButton=!1),t.sliderNext&&!document.querySelector(t.sliderNext)&&(console.warn("didn't get html element: sliderNext"),t.sliderNext=!1),t.paginationWrap&&!document.querySelector(t.paginationWrap)&&(console.warn("didn't get html element: paginationWrap"),t.paginationWrap=!1),i.slider=document.querySelector(t.slider),i.roledescription=t.roledescription||"carousel",i.slideRoledescription=t.slideRoledescription||"slide",i.gap=t.gap||0,i.currentSlide=t.currentSlide||0,i.speed=t.speed||300,i.loop=t.loop||!1,i.autoPlay=t.autoPlay||!1,i.autoplaySpeed=t.autoplaySpeed||0,i.playClass=t.playButton||!1,i.playButton=document.querySelector(t.playButton),i.sliderPrew=document.querySelector(t.sliderPrew)||!1,i.sliderNext=document.querySelector(t.sliderNext)||!1,i.paginationWrap=document.querySelector(t.paginationWrap)||!1,i.paginationTag=t.paginationTag||"span",i.paginationClass=t.paginationClass||"bolt-slider__paginaton-btn",i.paginationAria=t.paginationAria||"Go to slide",i.slider.querySelector(".bolt-slider__list-wrap")?i.slider.querySelector(".bolt-slider__list")?i.slider.querySelector(".bolt-slider__item")?i.slider.querySelector(".bolt-slider__content")?(i.width=0,i.sliderListWrap=i.slider.querySelector(".bolt-slider__list-wrap"),i.sliderList=i.slider.querySelector(".bolt-slider__list"),i.sliderItems=i.sliderList.querySelectorAll(".bolt-slider__item"),i.sliderItems=Array.prototype.slice.call(i.sliderItems),i.slide=i.sliderList.querySelectorAll(".bolt-slider__content"),i.slideLength=i.sliderItems.length,i.paginations=[],i.checkAutoPlay=i.autoPlay,i.setIntervalAutoPlay=!1,i.startClientX=0,i.timeOutAnimation,i.loop&&(i.currentSlide+=1),i.currentSlide>i.slideLength&&(i.currentSlide=0),void i.sliderInit()):console.warn("didn't get html element: slider contents"):console.warn("didn't get html element: slider items"):console.warn("didn't get html element: slider list"):console.warn("didn't get html element: slider wrap list")):console.warn("didn't get html element: slider"):console.warn("Not slider options")}return _createClass(e,[{key:"sliderInit",value:function(){var e=this;e.slider.classList.remove("bolt-no-js"),e.slider.setAttribute("aria-roledescription",e.roledescription),e.loop&&e.createLoop();for(var t=0;t<e.slideLength;t++)e.sliderItems[t].ariaLive="off",e.sliderItems[t].setAttribute("aria-roledescription",e.slideRoledescription),e.sliderItems[t].setAttribute("tabindex",-1);e.setSliderSize(),window.addEventListener("resize",function(){e.setSliderSize(),e.moveSlider()}),e.paginationWrap&&e.setPagination(),e.sliderNext&&e.moveNext(),e.sliderPrew&&e.movePrew(),e.updateSlide(),e.moveSlider(),e.checkAutoPlay&&e.autoPlayControl(),e.playButton&&e.controllPlayButton(),e.touthMove(),e.moveKeyboard()}},{key:"setSliderSize",value:function(){var e=this;e.width=e.slider.offsetWidth,e.sliderList.style.width=e.width*e.slideLength+e.gap*e.slideLength+"px",e.sliderList.style.height=e.sliderItems[e.currentSlide].querySelector(".bolt-slider__content").offsetHeight+"px",e.sliderItems.forEach(function(t){t.style.width=e.width+"px",e.gap&&(t.style.marginRight=e.gap+"px")})}},{key:"setPagination",value:function(){for(var e=this,t=e.loop?e.slideLength-2:e.slideLength,i=function(t){var i=document.createElement(e.paginationTag);i.classList.add(e.paginationClass),e.paginationWrap.appendChild(i),"button"==e.paginationTag&&(i.ariaLabel=e.paginationAria+" "+(t+1)+".",i.addEventListener("click",function(){e.currentSlide=e.loop?t+1:t,e.sliderAnimation(),e.moveSlider()})),e.paginations.push(i)},l=0;l<t;l++)i(l)}},{key:"moveNext",value:function(){var e=this;e.sliderNext.addEventListener("click",function(){e.nextSlider()})}},{key:"nextSlider",value:function(){var e=this;if(e.currentSlide++,e.currentSlide>=e.slideLength&&(e.currentSlide=e.slideLength-1),e.loop&&e.currentSlide>=e.slideLength-1)return e.sliderAnimation(),e.moveSlider(),void setTimeout(function(){e.currentSlide=1,e.updateSlide(),e.updateAriaLive(),e.moveSlider()},e.speed+50);e.sliderAnimation(),e.moveSlider()}},{key:"movePrew",value:function(){var e=this;e.sliderPrew.addEventListener("click",function(){e.prewSlide()})}},{key:"prewSlide",value:function(){var e=this;if(e.currentSlide--,console.log(e.currentSlide<=1),e.loop&&e.currentSlide<=0)return e.sliderAnimation(),e.moveSlider(),void setTimeout(function(){e.currentSlide=e.slideLength-2,e.updateSlide(),e.updateAriaLive(),e.moveSlider()},e.speed+50);e.currentSlide<0&&(e.currentSlide=0),e.sliderAnimation(),e.moveSlider()}},{key:"moveSlider",value:function(){var e=this;e.sliderList.style.transform="translateX(-".concat(e.currentSlide*e.width+e.gap*e.currentSlide,"px)"),e.sliderList.style.height=e.sliderItems[e.currentSlide].querySelector(".bolt-slider__content").offsetHeight+"px",e.paginationWrap&&e.updatePagination(),e.sliderNext&&e.updateSlideNext(),e.sliderPrew&&e.updateSlidePrew()}},{key:"updateSlide",value:function(){var e=this;e.sliderList.querySelector('[tabindex="0"]')&&e.sliderList.querySelector('[tabindex="0"]').setAttribute("tabindex",-1),e.sliderItems[e.currentSlide].classList.add("bolt-slider__item--active"),e.sliderItems[e.currentSlide].setAttribute("tabindex",0)}},{key:"updateAriaLive",value:function(){var e=this;e.sliderList.querySelector('.bolt-slider__item[aria-live="polite"]')&&(e.sliderList.querySelector('.bolt-slider__item[aria-live="polite"]').ariaLive="off"),e.checkAutoPlay||(e.sliderItems[e.currentSlide].ariaLive="polite")}},{key:"updatePagination",value:function(){var e=this;if(e.paginationWrap.querySelector(".bolt-slider__pagination-btn--active")&&("button"==e.paginationTag&&(e.paginationWrap.querySelector(".bolt-slider__pagination-btn--active").disabled=!1),e.paginationWrap.querySelector(".bolt-slider__pagination-btn--active").classList.remove(e.paginationClass+"--active")),e.loop){if(e.currentSlide>=e.slideLength-1)return e.paginations[0].disabled=!0,void e.paginations[0].classList.add(e.paginationClass+"--active");if(e.currentSlide<=0)return e.paginations[e.slideLength-3].disabled=!0,void e.paginations[e.slideLength-3].classList.add(e.paginationClass+"--active");e.paginations[e.currentSlide-1].disabled=!0,e.paginations[e.currentSlide-1].classList.add(e.paginationClass+"--active")}else e.paginations[e.currentSlide].disabled=!0,e.paginations[e.currentSlide].classList.add(e.paginationClass+"--active")}},{key:"updateSlideNext",value:function(){var e=this;1==e.sliderNext.disabled&&e.currentSlide<e.slideLength-1&&(e.sliderNext.disabled=!1),e.currentSlide>=e.slideLength-1&&(e.sliderNext.disabled=!0)}},{key:"updateSlidePrew",value:function(){var e=this;1==e.sliderPrew.disabled&&e.currentSlide>0&&(e.sliderPrew.disabled=!1),e.currentSlide<=0&&(e.sliderPrew.disabled=!0)}},{key:"sliderAnimation",value:function(){var e=this;clearTimeout(e.timeOutAnimation),e.setAnimation(),e.updateAriaLive(),e.sliderItems.forEach(function(e){e.classList.add("bolt-slider__item--active")}),e.timeOutAnimation=setTimeout(function(){e.sliderItems.forEach(function(e){e.classList.remove("bolt-slider__item--active")}),e.removeAnimation(),e.updateSlide()},e.speed)}},{key:"setAnimation",value:function(){var e=this;e.sliderList.style.transitionDuration="".concat(e.speed,"ms, ").concat(e.speed,"ms")}},{key:"removeAnimation",value:function(){this.sliderList.style.transitionDuration="0ms, 0ms"}},{key:"drawAutoPlay",value:function(){var e=this;e.setIntervalAutoPlay=setInterval(function(){e.currentSlide==e.slideLength-1&&(e.currentSlide=-1),e.nextSlider()},e.autoplaySpeed)}},{key:"pauseAutoPlay",value:function(){clearInterval(this.setIntervalAutoPlay)}},{key:"autoPlayControl",value:function(){var e=this;e.drawAutoPlay();e.slider.addEventListener("mouseover",function(){e.pauseAutoPlay()}),e.slider.addEventListener("mouseout",function(){e.checkAutoPlay&&e.drawAutoPlay()}),e.slider.addEventListener("keyup",function(){document.querySelector(":focus, :focus-visible")&&e.stopAutoPlay()}),e.sliderList.addEventListener("click",function(){e.stopAutoPlay()}),e.sliderNext.addEventListener("click",function(){e.stopAutoPlay()}),e.sliderPrew.addEventListener("click",function(){e.stopAutoPlay()}),e.paginationWrap.addEventListener("click",function(){e.stopAutoPlay()})}},{key:"stopAutoPlay",value:function(e,t,i,l,r,n,a){var s=this;s.pauseAutoPlay(e,t,i),s.checkAutoPlay=!1,removeEventListener("mouseover",t,!1),removeEventListener("mouseout",e,!1),removeEventListener("click",i,!1),removeEventListener("click",l,!1),removeEventListener("click",r,!1),removeEventListener("click",n,!1),removeEventListener("keyup",a,!1),s.updateAriaLive()}},{key:"controllPlayButton",value:function(){var e=this;e.playButton.classList.toggle(e.playClass+"--play"),e.playButton.addEventListener("click",function(){e.playButton.classList.toggle(e.playClass+"--play"),e.playButton.classList.toggle(e.playClass+"--paused"),e.checkAutoPlay?(e.checkAutoPlay=!1,e.stopAutoPlay()):(e.checkAutoPlay=!0,e.drawAutoPlay())})}},{key:"touthMove",value:function(){var e=this;e.sliderList.addEventListener("touchstart",function(t){e.checkAutoPlay&&e.stopAutoPlay(),e.startClientX=t.touches[0].clientX,e.sliderItems.forEach(function(e){e.classList.add("bolt-slider__item--active")})}),e.sliderList.addEventListener("touchmove",function(t){e.touchMove=e.startClientX-t.touches[0].clientX}),e.sliderList.addEventListener("touchend",function(){e.touchMove<30&&e.touchMove>-30&&(e.sliderAnimation(),e.moveSlider()),e.touchMove>0&&e.nextSlider(),e.touchMove<0&&e.prewSlide(),e.touchMove=0})}},{key:"moveKeyboard",value:function(){var e=this;e.sliderList.addEventListener("keydown",function(t){39==t.keyCode&&e.nextSlide(),37==t.keyCode&&e.prewSlide()})}},{key:"createLoop",value:function(){var e=this,t=e.sliderItems[0].cloneNode(!0),i=e.sliderItems[e.slideLength-1].cloneNode(!0);t.ariaHidden=!0,i.ariaHidden=!0,e.sliderList.append(t),e.sliderList.prepend(i),e.sliderItems.push(t),e.sliderItems.unshift(i),e.slideLength+=2}}]),e}();